import { CurrentResourceStrings } from '../../core/i18n/resources';
import { IgxDateSummaryOperand, IgxNumberSummaryOperand, IgxTimeSummaryOperand } from '../summaries/grid-summary';
export class IgxPivotAggregate {
    static { this._resourceStrings = CurrentResourceStrings.GridResStrings; }
    /**
     * Gets/Sets the resource strings.
     *
     * @remarks
     * By default it uses EN resources.
     */
    static set resourceStrings(value) {
        this._resourceStrings = Object.assign({}, this._resourceStrings, value);
    }
    static get resourceStrings() {
        return this._resourceStrings;
    }
    /**
     * Gets array with default aggregator function for base aggregation.
     * ```typescript
     * IgxPivotAggregate.aggregators();
     * ```
     *
     * @memberof IgxPivotAggregate
     */
    static aggregators() {
        return [{
                key: 'COUNT',
                label: this.resourceStrings.igx_grid_pivot_aggregate_count,
                aggregator: IgxPivotAggregate.count
            }];
    }
    /**
     * Counts all the records in the data source.
     * If filtering is applied, counts only the filtered records.
     * ```typescript
     * IgxSummaryOperand.count(dataSource);
     * ```
     *
     * @memberof IgxPivotAggregate
     */
    static count(members) {
        return members.length;
    }
}
export class IgxPivotNumericAggregate extends IgxPivotAggregate {
    /**
     * Gets array with default aggregator function for numeric aggregation.
     * ```typescript
     * IgxPivotAggregate.aggregators();
     * ```
     *
     * @memberof IgxPivotAggregate
     */
    static aggregators() {
        let result = [];
        result = result.concat(super.aggregators());
        result.push({
            key: 'MIN',
            label: this.resourceStrings.igx_grid_pivot_aggregate_min,
            aggregator: IgxPivotNumericAggregate.min
        });
        result.push({
            key: 'MAX',
            label: this.resourceStrings.igx_grid_pivot_aggregate_max,
            aggregator: IgxPivotNumericAggregate.max
        });
        result.push({
            key: 'SUM',
            label: this.resourceStrings.igx_grid_pivot_aggregate_sum,
            aggregator: IgxPivotNumericAggregate.sum
        });
        result.push({
            key: 'AVG',
            label: this.resourceStrings.igx_grid_pivot_aggregate_avg,
            aggregator: IgxPivotNumericAggregate.average
        });
        return result;
    }
    /**
     * Returns the minimum numeric value in the provided data records.
     * If filtering is applied, returns the minimum value in the filtered data records.
     * ```typescript
     * IgxPivotNumericAggregate.min(members, data);
     * ```
     *
     * @memberof IgxPivotNumericAggregate
     */
    static min(members) {
        return IgxNumberSummaryOperand.min(members);
    }
    /**
     * Returns the maximum numeric value in the provided data records.
     * If filtering is applied, returns the maximum value in the filtered data records.
     * ```typescript
     * IgxPivotNumericAggregate.max(data);
     * ```
     *
     * @memberof IgxPivotNumericAggregate
     */
    static max(members) {
        return IgxNumberSummaryOperand.max(members);
    }
    /**
     * Returns the sum of the numeric values in the provided data records.
     * If filtering is applied, returns the sum of the numeric values in the data records.
     * ```typescript
     * IgxPivotNumericAggregate.sum(data);
     * ```
     *
     * @memberof IgxPivotNumericAggregate
     */
    static sum(members) {
        return IgxNumberSummaryOperand.sum(members);
    }
    /**
     * Returns the average numeric value in the data provided data records.
     * If filtering is applied, returns the average numeric value in the filtered data records.
     * ```typescript
     * IgxPivotNumericAggregate.average(data);
     * ```
     *
     * @memberof IgxPivotNumericAggregate
     */
    static average(members) {
        return IgxNumberSummaryOperand.average(members);
    }
}
export class IgxPivotDateAggregate extends IgxPivotAggregate {
    /**
     * Gets array with default aggregator function for date aggregation.
     * ```typescript
     * IgxPivotDateAggregate.aggregators();
     * ```
     *
     * @memberof IgxPivotAggregate
     */
    static aggregators() {
        let result = [];
        result = result.concat(super.aggregators());
        result.push({
            key: 'LATEST',
            label: this.resourceStrings.igx_grid_pivot_aggregate_date_latest,
            aggregator: IgxPivotDateAggregate.latest
        });
        result.push({
            key: 'EARLIEST',
            label: this.resourceStrings.igx_grid_pivot_aggregate_date_earliest,
            aggregator: IgxPivotDateAggregate.earliest
        });
        return result;
    }
    /**
     * Returns the latest date value in the data records.
     * If filtering is applied, returns the latest date value in the filtered data records.
     * ```typescript
     * IgxPivotDateAggregate.latest(data);
     * ```
     *
     * @memberof IgxPivotDateAggregate
     */
    static latest(members) {
        return IgxDateSummaryOperand.latest(members);
    }
    /**
     * Returns the earliest date value in the data records.
     * If filtering is applied, returns the latest date value in the filtered data records.
     * ```typescript
     * IgxPivotDateAggregate.earliest(data);
     * ```
     *
     * @memberof IgxPivotDateAggregate
     */
    static earliest(members) {
        return IgxDateSummaryOperand.earliest(members);
    }
}
export class IgxPivotTimeAggregate extends IgxPivotAggregate {
    /**
     * Gets array with default aggregator function for time aggregation.
     * ```typescript
     * IgxPivotTimeAggregate.aggregators();
     * ```
     *
     * @memberof IgxPivotAggregate
     */
    static aggregators() {
        let result = [];
        result = result.concat(super.aggregators());
        result.push({
            key: 'LATEST',
            label: this.resourceStrings.igx_grid_pivot_aggregate_time_latest,
            aggregator: IgxPivotTimeAggregate.latestTime
        });
        result.push({
            key: 'EARLIEST',
            label: this.resourceStrings.igx_grid_pivot_aggregate_time_earliest,
            aggregator: IgxPivotTimeAggregate.earliestTime
        });
        return result;
    }
    /**
     * Returns the latest time value in the data records. Compare only the time part of the date.
     * If filtering is applied, returns the latest time value in the filtered data records.
     * ```typescript
     * IgxPivotTimeAggregate.latestTime(data);
     * ```
     *
     * @memberof IgxPivotTimeAggregate
     */
    static latestTime(members) {
        return IgxTimeSummaryOperand.latestTime(members);
    }
    /**
     * Returns the earliest time value in the data records. Compare only the time part of the date.
     * If filtering is applied, returns the earliest time value in the filtered data records.
     * ```typescript
     * IgxPivotTimeAggregate.earliestTime(data);
     * ```
     *
     * @memberof IgxPivotTimeAggregate
     */
    static earliestTime(members) {
        return IgxTimeSummaryOperand.earliestTime(members);
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGl2b3QtZ3JpZC1hZ2dyZWdhdGUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9pZ25pdGV1aS1hbmd1bGFyL3NyYy9saWIvZ3JpZHMvcGl2b3QtZ3JpZC9waXZvdC1ncmlkLWFnZ3JlZ2F0ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxPQUFPLEVBQUUsc0JBQXNCLEVBQUUsTUFBTSwyQkFBMkIsQ0FBQztBQUNuRSxPQUFPLEVBQUUscUJBQXFCLEVBQUUsdUJBQXVCLEVBQUUscUJBQXFCLEVBQUUsTUFBTSwyQkFBMkIsQ0FBQztBQUlsSCxNQUFNLE9BQU8saUJBQWlCO2FBQ1gscUJBQWdCLEdBQUcsc0JBQXNCLENBQUMsY0FBYyxDQUFDO0lBQ3hFOzs7OztPQUtHO0lBQ0ssTUFBTSxLQUFLLGVBQWUsQ0FBQyxLQUEyQjtRQUMxRCxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsSUFBSSxDQUFDLGdCQUFnQixFQUFFLEtBQUssQ0FBQyxDQUFDO0lBQzVFLENBQUM7SUFFTSxNQUFNLEtBQUssZUFBZTtRQUM3QixPQUFPLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQztJQUNqQyxDQUFDO0lBRUQ7Ozs7Ozs7T0FPRztJQUNJLE1BQU0sQ0FBQyxXQUFXO1FBQ3JCLE9BQU8sQ0FBQztnQkFDSixHQUFHLEVBQUUsT0FBTztnQkFDWixLQUFLLEVBQUUsSUFBSSxDQUFDLGVBQWUsQ0FBQyw4QkFBOEI7Z0JBQzFELFVBQVUsRUFBRSxpQkFBaUIsQ0FBQyxLQUFLO2FBQ3RDLENBQUMsQ0FBQztJQUNQLENBQUM7SUFDRDs7Ozs7Ozs7T0FRRztJQUNJLE1BQU0sQ0FBQyxLQUFLLENBQUMsT0FBaUI7UUFDakMsT0FBTyxPQUFPLENBQUMsTUFBTSxDQUFDO0lBQzFCLENBQUM7O0FBR0wsTUFBTSxPQUFPLHdCQUF5QixTQUFRLGlCQUFpQjtJQUUzRDs7Ozs7OztPQU9H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QztJQUNuRCxDQUFDO0NBQ0o7QUFFRCxNQUFNLE9BQU8scUJBQXNCLFNBQVEsaUJBQWlCO0lBQ3hEOzs7Ozs7O09BT0c7SUFDSSxNQUFNLENBQVUsV0FBVztRQUM5QixJQUFJLE1BQU0sR0FBdUIsRUFBRSxDQUFDO1FBQ3BDLE1BQU0sR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxXQUFXLEVBQUUsQ0FBQyxDQUFDO1FBQzVDLE1BQU0sQ0FBQyxJQUFJLENBQUM7WUFDUixHQUFHLEVBQUUsUUFBUTtZQUNiLEtBQUssRUFBRSxJQUFJLENBQUMsZUFBZSxDQUFDLG9DQUFvQztZQUNoRSxVQUFVLEVBQUUscUJBQXFCLENBQUMsVUFBVTtTQUMvQyxDQUFDLENBQUM7UUFDSCxNQUFNLENBQUMsSUFBSSxDQUFDO1lBQ1IsR0FBRyxFQUFFLFVBQVU7WUFDZixLQUFLLEVBQUUsSUFBSSxDQUFDLGVBQWUsQ0FBQyxzQ0FBc0M7WUFDbEUsVUFBVSxFQUFFLHFCQUFxQixDQUFDLFlBQVk7U0FDakQsQ0FBQyxDQUFDO1FBQ0gsT0FBTyxNQUFNLENBQUM7SUFDbEIsQ0FBQztJQUVEOzs7Ozs7OztPQVFHO0lBQ0ksTUFBTSxDQUFDLFVBQVUsQ0FBQyxPQUFjO1FBQ25DLE9BQU8scUJBQXFCLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQ3JELENBQUM7SUFFRDs7Ozs7Ozs7T0FRRztJQUNJLE1BQU0sQ0FBQyxZQUFZLENBQUMsT0FBYztRQUNyQyxPQUFPLHFCQUFxQixDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUN2RCxDQUFDO0NBQ0oiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJR3JpZFJlc291cmNlU3RyaW5ncyB9IGZyb20gJy4uLy4uL2NvcmUvaTE4bi9ncmlkLXJlc291cmNlcyc7XG5pbXBvcnQgeyBDdXJyZW50UmVzb3VyY2VTdHJpbmdzIH0gZnJvbSAnLi4vLi4vY29yZS9pMThuL3Jlc291cmNlcyc7XG5pbXBvcnQgeyBJZ3hEYXRlU3VtbWFyeU9wZXJhbmQsIElneE51bWJlclN1bW1hcnlPcGVyYW5kLCBJZ3hUaW1lU3VtbWFyeU9wZXJhbmQgfSBmcm9tICcuLi9zdW1tYXJpZXMvZ3JpZC1zdW1tYXJ5JztcbmltcG9ydCB7IElQaXZvdEFnZ3JlZ2F0b3IgfSBmcm9tICcuL3Bpdm90LWdyaWQuaW50ZXJmYWNlJztcblxuXG5leHBvcnQgY2xhc3MgSWd4UGl2b3RBZ2dyZWdhdGUge1xuICAgIHByaXZhdGUgc3RhdGljIF9yZXNvdXJjZVN0cmluZ3MgPSBDdXJyZW50UmVzb3VyY2VTdHJpbmdzLkdyaWRSZXNTdHJpbmdzO1xuICAgIC8qKlxuICAgICAqIEdldHMvU2V0cyB0aGUgcmVzb3VyY2Ugc3RyaW5ncy5cbiAgICAgKlxuICAgICAqIEByZW1hcmtzXG4gICAgICogQnkgZGVmYXVsdCBpdCB1c2VzIEVOIHJlc291cmNlcy5cbiAgICAgKi9cbiAgICAgcHVibGljIHN0YXRpYyBzZXQgcmVzb3VyY2VTdHJpbmdzKHZhbHVlOiBJR3JpZFJlc291cmNlU3RyaW5ncykge1xuICAgICAgICB0aGlzLl9yZXNvdXJjZVN0cmluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLl9yZXNvdXJjZVN0cmluZ3MsIHZhbHVlKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGdldCByZXNvdXJjZVN0cmluZ3MoKTogSUdyaWRSZXNvdXJjZVN0cmluZ3Mge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVzb3VyY2VTdHJpbmdzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgYXJyYXkgd2l0aCBkZWZhdWx0IGFnZ3JlZ2F0b3IgZnVuY3Rpb24gZm9yIGJhc2UgYWdncmVnYXRpb24uXG4gICAgICogYGBgdHlwZXNjcmlwdFxuICAgICAqIElneFBpdm90QWdncmVnYXRlLmFnZ3JlZ2F0b3JzKCk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAbWVtYmVyb2YgSWd4UGl2b3RBZ2dyZWdhdGVcbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIGFnZ3JlZ2F0b3JzKCk6IEFycmF5PElQaXZvdEFnZ3JlZ2F0b3I+IHtcbiAgICAgICAgcmV0dXJuIFt7XG4gICAgICAgICAgICBrZXk6ICdDT1VOVCcsXG4gICAgICAgICAgICBsYWJlbDogdGhpcy5yZXNvdXJjZVN0cmluZ3MuaWd4X2dyaWRfcGl2b3RfYWdncmVnYXRlX2NvdW50LFxuICAgICAgICAgICAgYWdncmVnYXRvcjogSWd4UGl2b3RBZ2dyZWdhdGUuY291bnRcbiAgICAgICAgfV07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvdW50cyBhbGwgdGhlIHJlY29yZHMgaW4gdGhlIGRhdGEgc291cmNlLlxuICAgICAqIElmIGZpbHRlcmluZyBpcyBhcHBsaWVkLCBjb3VudHMgb25seSB0aGUgZmlsdGVyZWQgcmVjb3Jkcy5cbiAgICAgKiBgYGB0eXBlc2NyaXB0XG4gICAgICogSWd4U3VtbWFyeU9wZXJhbmQuY291bnQoZGF0YVNvdXJjZSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAbWVtYmVyb2YgSWd4UGl2b3RBZ2dyZWdhdGVcbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIGNvdW50KG1lbWJlcnM6IG51bWJlcltdKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIG1lbWJlcnMubGVuZ3RoO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIElneFBpdm90TnVtZXJpY0FnZ3JlZ2F0ZSBleHRlbmRzIElneFBpdm90QWdncmVnYXRlIHtcblxuICAgIC8qKlxuICAgICAqIEdldHMgYXJyYXkgd2l0aCBkZWZhdWx0IGFnZ3JlZ2F0b3IgZnVuY3Rpb24gZm9yIG51bWVyaWMgYWdncmVnYXRpb24uXG4gICAgICogYGBgdHlwZXNjcmlwdFxuICAgICAqIElneFBpdm90QWdncmVnYXRlLmFnZ3JlZ2F0b3JzKCk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAbWVtYmVyb2YgSWd4UGl2b3RBZ2dyZWdhdGVcbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIGFnZ3JlZ2F0b3JzKCkge1xuICAgICAgICBsZXQgcmVzdWx0OiBJUGl2b3RBZ2dyZWdhdG9yW10gPSBbXTtcbiAgICAgICAgcmVzdWx0ID0gcmVzdWx0LmNvbmNhdChzdXBlci5hZ2dyZWdhdG9ycygpKTtcbiAgICAgICAgcmVzdWx0LnB1c2goe1xuICAgICAgICAgICAga2V5OiAnTUlOJyxcbiAgICAgICAgICAgIGxhYmVsOiB0aGlzLnJlc291cmNlU3RyaW5ncy5pZ3hfZ3JpZF9waXZvdF9hZ2dyZWdhdGVfbWluLFxuICAgICAgICAgICAgYWdncmVnYXRvcjogSWd4UGl2b3ROdW1lcmljQWdncmVnYXRlLm1pblxuICAgICAgICB9KTtcbiAgICAgICAgcmVzdWx0LnB1c2goe1xuICAgICAgICAgICAga2V5OiAnTUFYJyxcbiAgICAgICAgICAgIGxhYmVsOiB0aGlzLnJlc291cmNlU3RyaW5ncy5pZ3hfZ3JpZF9waXZvdF9hZ2dyZWdhdGVfbWF4LFxuICAgICAgICAgICAgYWdncmVnYXRvcjogSWd4UGl2b3ROdW1lcmljQWdncmVnYXRlLm1heFxuICAgICAgICB9KTtcblxuICAgICAgICByZXN1bHQucHVzaCh7XG4gICAgICAgICAgICBrZXk6ICdTVU0nLFxuICAgICAgICAgICAgbGFiZWw6IHRoaXMucmVzb3VyY2VTdHJpbmdzLmlneF9ncmlkX3Bpdm90X2FnZ3JlZ2F0ZV9zdW0sXG4gICAgICAgICAgICBhZ2dyZWdhdG9yOiBJZ3hQaXZvdE51bWVyaWNBZ2dyZWdhdGUuc3VtXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJlc3VsdC5wdXNoKHtcbiAgICAgICAgICAgIGtleTogJ0FWRycsXG4gICAgICAgICAgICBsYWJlbDogdGhpcy5yZXNvdXJjZVN0cmluZ3MuaWd4X2dyaWRfcGl2b3RfYWdncmVnYXRlX2F2ZyxcbiAgICAgICAgICAgIGFnZ3JlZ2F0b3I6IElneFBpdm90TnVtZXJpY0FnZ3JlZ2F0ZS5hdmVyYWdlXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIG1pbmltdW0gbnVtZXJpYyB2YWx1ZSBpbiB0aGUgcHJvdmlkZWQgZGF0YSByZWNvcmRzLlxuICAgICAqIElmIGZpbHRlcmluZyBpcyBhcHBsaWVkLCByZXR1cm5zIHRoZSBtaW5pbXVtIHZhbHVlIGluIHRoZSBmaWx0ZXJlZCBkYXRhIHJlY29yZHMuXG4gICAgICogYGBgdHlwZXNjcmlwdFxuICAgICAqIElneFBpdm90TnVtZXJpY0FnZ3JlZ2F0ZS5taW4obWVtYmVycywgZGF0YSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAbWVtYmVyb2YgSWd4UGl2b3ROdW1lcmljQWdncmVnYXRlXG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyBtaW4obWVtYmVyczogbnVtYmVyW10pOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gSWd4TnVtYmVyU3VtbWFyeU9wZXJhbmQubWluKG1lbWJlcnMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIG1heGltdW0gbnVtZXJpYyB2YWx1ZSBpbiB0aGUgcHJvdmlkZWQgZGF0YSByZWNvcmRzLlxuICAgICAqIElmIGZpbHRlcmluZyBpcyBhcHBsaWVkLCByZXR1cm5zIHRoZSBtYXhpbXVtIHZhbHVlIGluIHRoZSBmaWx0ZXJlZCBkYXRhIHJlY29yZHMuXG4gICAgICogYGBgdHlwZXNjcmlwdFxuICAgICAqIElneFBpdm90TnVtZXJpY0FnZ3JlZ2F0ZS5tYXgoZGF0YSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAbWVtYmVyb2YgSWd4UGl2b3ROdW1lcmljQWdncmVnYXRlXG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyBtYXgobWVtYmVyczogbnVtYmVyW10pOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gSWd4TnVtYmVyU3VtbWFyeU9wZXJhbmQubWF4KG1lbWJlcnMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHN1bSBvZiB0aGUgbnVtZXJpYyB2YWx1ZXMgaW4gdGhlIHByb3ZpZGVkIGRhdGEgcmVjb3Jkcy5cbiAgICAgKiBJZiBmaWx0ZXJpbmcgaXMgYXBwbGllZCwgcmV0dXJucyB0aGUgc3VtIG9mIHRoZSBudW1lcmljIHZhbHVlcyBpbiB0aGUgZGF0YSByZWNvcmRzLlxuICAgICAqIGBgYHR5cGVzY3JpcHRcbiAgICAgKiBJZ3hQaXZvdE51bWVyaWNBZ2dyZWdhdGUuc3VtKGRhdGEpO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQG1lbWJlcm9mIElneFBpdm90TnVtZXJpY0FnZ3JlZ2F0ZVxuICAgICAqL1xuICAgIHB1YmxpYyBzdGF0aWMgc3VtKG1lbWJlcnM6IG51bWJlcltdKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIElneE51bWJlclN1bW1hcnlPcGVyYW5kLnN1bShtZW1iZXJzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBhdmVyYWdlIG51bWVyaWMgdmFsdWUgaW4gdGhlIGRhdGEgcHJvdmlkZWQgZGF0YSByZWNvcmRzLlxuICAgICAqIElmIGZpbHRlcmluZyBpcyBhcHBsaWVkLCByZXR1cm5zIHRoZSBhdmVyYWdlIG51bWVyaWMgdmFsdWUgaW4gdGhlIGZpbHRlcmVkIGRhdGEgcmVjb3Jkcy5cbiAgICAgKiBgYGB0eXBlc2NyaXB0XG4gICAgICogSWd4UGl2b3ROdW1lcmljQWdncmVnYXRlLmF2ZXJhZ2UoZGF0YSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAbWVtYmVyb2YgSWd4UGl2b3ROdW1lcmljQWdncmVnYXRlXG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyBhdmVyYWdlKG1lbWJlcnM6IG51bWJlcltdKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIElneE51bWJlclN1bW1hcnlPcGVyYW5kLmF2ZXJhZ2UobWVtYmVycyk7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgSWd4UGl2b3REYXRlQWdncmVnYXRlIGV4dGVuZHMgSWd4UGl2b3RBZ2dyZWdhdGUge1xuICAgIC8qKlxuICAgICAqIEdldHMgYXJyYXkgd2l0aCBkZWZhdWx0IGFnZ3JlZ2F0b3IgZnVuY3Rpb24gZm9yIGRhdGUgYWdncmVnYXRpb24uXG4gICAgICogYGBgdHlwZXNjcmlwdFxuICAgICAqIElneFBpdm90RGF0ZUFnZ3JlZ2F0ZS5hZ2dyZWdhdG9ycygpO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQG1lbWJlcm9mIElneFBpdm90QWdncmVnYXRlXG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyBvdmVycmlkZSBhZ2dyZWdhdG9ycygpIHtcbiAgICAgICAgbGV0IHJlc3VsdDogSVBpdm90QWdncmVnYXRvcltdID0gW107XG4gICAgICAgIHJlc3VsdCA9IHJlc3VsdC5jb25jYXQoc3VwZXIuYWdncmVnYXRvcnMoKSk7XG4gICAgICAgIHJlc3VsdC5wdXNoKHtcbiAgICAgICAgICAgIGtleTogJ0xBVEVTVCcsXG4gICAgICAgICAgICBsYWJlbDogdGhpcy5yZXNvdXJjZVN0cmluZ3MuaWd4X2dyaWRfcGl2b3RfYWdncmVnYXRlX2RhdGVfbGF0ZXN0LFxuICAgICAgICAgICAgYWdncmVnYXRvcjogSWd4UGl2b3REYXRlQWdncmVnYXRlLmxhdGVzdFxuICAgICAgICB9KTtcbiAgICAgICAgcmVzdWx0LnB1c2goe1xuICAgICAgICAgICAga2V5OiAnRUFSTElFU1QnLFxuICAgICAgICAgICAgbGFiZWw6IHRoaXMucmVzb3VyY2VTdHJpbmdzLmlneF9ncmlkX3Bpdm90X2FnZ3JlZ2F0ZV9kYXRlX2VhcmxpZXN0LFxuICAgICAgICAgICAgYWdncmVnYXRvcjogSWd4UGl2b3REYXRlQWdncmVnYXRlLmVhcmxpZXN0XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBsYXRlc3QgZGF0ZSB2YWx1ZSBpbiB0aGUgZGF0YSByZWNvcmRzLlxuICAgICAqIElmIGZpbHRlcmluZyBpcyBhcHBsaWVkLCByZXR1cm5zIHRoZSBsYXRlc3QgZGF0ZSB2YWx1ZSBpbiB0aGUgZmlsdGVyZWQgZGF0YSByZWNvcmRzLlxuICAgICAqIGBgYHR5cGVzY3JpcHRcbiAgICAgKiBJZ3hQaXZvdERhdGVBZ2dyZWdhdGUubGF0ZXN0KGRhdGEpO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQG1lbWJlcm9mIElneFBpdm90RGF0ZUFnZ3JlZ2F0ZVxuICAgICAqL1xuICAgIHB1YmxpYyBzdGF0aWMgbGF0ZXN0KG1lbWJlcnM6IGFueVtdKSB7XG4gICAgICAgIHJldHVybiBJZ3hEYXRlU3VtbWFyeU9wZXJhbmQubGF0ZXN0KG1lbWJlcnMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGVhcmxpZXN0IGRhdGUgdmFsdWUgaW4gdGhlIGRhdGEgcmVjb3Jkcy5cbiAgICAgKiBJZiBmaWx0ZXJpbmcgaXMgYXBwbGllZCwgcmV0dXJucyB0aGUgbGF0ZXN0IGRhdGUgdmFsdWUgaW4gdGhlIGZpbHRlcmVkIGRhdGEgcmVjb3Jkcy5cbiAgICAgKiBgYGB0eXBlc2NyaXB0XG4gICAgICogSWd4UGl2b3REYXRlQWdncmVnYXRlLmVhcmxpZXN0KGRhdGEpO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQG1lbWJlcm9mIElneFBpdm90RGF0ZUFnZ3JlZ2F0ZVxuICAgICAqL1xuICAgIHB1YmxpYyBzdGF0aWMgZWFybGllc3QobWVtYmVyczogYW55W10pIHtcbiAgICAgICAgcmV0dXJuIElneERhdGVTdW1tYXJ5T3BlcmFuZC5lYXJsaWVzdChtZW1iZXJzKTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBJZ3hQaXZvdFRpbWVBZ2dyZWdhdGUgZXh0ZW5kcyBJZ3hQaXZvdEFnZ3JlZ2F0ZSB7XG4gICAgLyoqXG4gICAgICogR2V0cyBhcnJheSB3aXRoIGRlZmF1bHQgYWdncmVnYXRvciBmdW5jdGlvbiBmb3IgdGltZSBhZ2dyZWdhdGlvbi5cbiAgICAgKiBgYGB0eXBlc2NyaXB0XG4gICAgICogSWd4UGl2b3RUaW1lQWdncmVnYXRlLmFnZ3JlZ2F0b3JzKCk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAbWVtYmVyb2YgSWd4UGl2b3RBZ2dyZWdhdGVcbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIG92ZXJyaWRlIGFnZ3JlZ2F0b3JzKCkge1xuICAgICAgICBsZXQgcmVzdWx0OiBJUGl2b3RBZ2dyZWdhdG9yW10gPSBbXTtcbiAgICAgICAgcmVzdWx0ID0gcmVzdWx0LmNvbmNhdChzdXBlci5hZ2dyZWdhdG9ycygpKTtcbiAgICAgICAgcmVzdWx0LnB1c2goe1xuICAgICAgICAgICAga2V5OiAnTEFURVNUJyxcbiAgICAgICAgICAgIGxhYmVsOiB0aGlzLnJlc291cmNlU3RyaW5ncy5pZ3hfZ3JpZF9waXZvdF9hZ2dyZWdhdGVfdGltZV9sYXRlc3QsXG4gICAgICAgICAgICBhZ2dyZWdhdG9yOiBJZ3hQaXZvdFRpbWVBZ2dyZWdhdGUubGF0ZXN0VGltZVxuICAgICAgICB9KTtcbiAgICAgICAgcmVzdWx0LnB1c2goe1xuICAgICAgICAgICAga2V5OiAnRUFSTElFU1QnLFxuICAgICAgICAgICAgbGFiZWw6IHRoaXMucmVzb3VyY2VTdHJpbmdzLmlneF9ncmlkX3Bpdm90X2FnZ3JlZ2F0ZV90aW1lX2VhcmxpZXN0LFxuICAgICAgICAgICAgYWdncmVnYXRvcjogSWd4UGl2b3RUaW1lQWdncmVnYXRlLmVhcmxpZXN0VGltZVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBsYXRlc3QgdGltZSB2YWx1ZSBpbiB0aGUgZGF0YSByZWNvcmRzLiBDb21wYXJlIG9ubHkgdGhlIHRpbWUgcGFydCBvZiB0aGUgZGF0ZS5cbiAgICAgKiBJZiBmaWx0ZXJpbmcgaXMgYXBwbGllZCwgcmV0dXJucyB0aGUgbGF0ZXN0IHRpbWUgdmFsdWUgaW4gdGhlIGZpbHRlcmVkIGRhdGEgcmVjb3Jkcy5cbiAgICAgKiBgYGB0eXBlc2NyaXB0XG4gICAgICogSWd4UGl2b3RUaW1lQWdncmVnYXRlLmxhdGVzdFRpbWUoZGF0YSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAbWVtYmVyb2YgSWd4UGl2b3RUaW1lQWdncmVnYXRlXG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyBsYXRlc3RUaW1lKG1lbWJlcnM6IGFueVtdKSB7XG4gICAgICAgIHJldHVybiBJZ3hUaW1lU3VtbWFyeU9wZXJhbmQubGF0ZXN0VGltZShtZW1iZXJzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBlYXJsaWVzdCB0aW1lIHZhbHVlIGluIHRoZSBkYXRhIHJlY29yZHMuIENvbXBhcmUgb25seSB0aGUgdGltZSBwYXJ0IG9mIHRoZSBkYXRlLlxuICAgICAqIElmIGZpbHRlcmluZyBpcyBhcHBsaWVkLCByZXR1cm5zIHRoZSBlYXJsaWVzdCB0aW1lIHZhbHVlIGluIHRoZSBmaWx0ZXJlZCBkYXRhIHJlY29yZHMuXG4gICAgICogYGBgdHlwZXNjcmlwdFxuICAgICAqIElneFBpdm90VGltZUFnZ3JlZ2F0ZS5lYXJsaWVzdFRpbWUoZGF0YSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAbWVtYmVyb2YgSWd4UGl2b3RUaW1lQWdncmVnYXRlXG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyBlYXJsaWVzdFRpbWUobWVtYmVyczogYW55W10pIHtcbiAgICAgICAgcmV0dXJuIElneFRpbWVTdW1tYXJ5T3BlcmFuZC5lYXJsaWVzdFRpbWUobWVtYmVycyk7XG4gICAgfVxufVxuIl19